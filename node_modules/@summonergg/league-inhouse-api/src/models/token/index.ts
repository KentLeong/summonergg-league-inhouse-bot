import log from "chalk-logging";
import { API } from "../api";
import { client } from "../..";
import randomize from "randomatic";
import { Summoner } from "@summonergg/riot-api";
import { translate } from "../../modules";

export class Token extends API {
  discordId: string;
  summonerId: string;
  region: string;
  profileIconId: number;
  key: string;

  res?: TranslateResponse;
  msg?: DiscordMessage;
  constructor(
    public opt?: apiOptions
  ) {
    super();
    if (opt?.msg) {
      this.msg = opt.msg;
      this.res = translate(this.msg, "token");
    }
  }

  async generateNew(id: number) {
    var newId: number;
    do {
      newId = Math.floor(Math.random() * Math.floor(29));
    } while(this.profileIconId == id || id  == newId);
    this.profileIconId = newId;
    this.key = randomize("aA0", 8);
    this.save();
  }
}
