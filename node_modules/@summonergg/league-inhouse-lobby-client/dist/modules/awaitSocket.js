"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.awaitSocket = void 0;
const tslib_1 = require("tslib");
const awaitSocket = (socket, emit, data) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    var out = Object.assign({ name: socket.name, region: socket.region }, data);
    return new Promise((resolve, reject) => {
        var timer = setTimeout(() => {
            reject("LobbyBot: Timed out waiting for response: " + emit);
            socket.off(emit, responseHandler);
        }, 5000);
        function responseHandler(msg) {
            resolve(msg);
            clearTimeout(timer);
        }
        socket.emit(emit, out);
        socket.once(emit, responseHandler);
    });
});
exports.awaitSocket = awaitSocket;
//# sourceMappingURL=awaitSocket.js.map