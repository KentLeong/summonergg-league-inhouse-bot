export const awaitSocket = async (socket: LobbySocket, emit: string, data: any) => {
  var out = {
    name: socket.name,
    region: socket.region,
    ...data,
  }
  return new Promise((resolve: any, reject: any) => {
    var timer = setTimeout(() => {
      reject("LobbyBot: Timed out waiting for response: "+ emit);
      socket.off(emit, responseHandler);
    }, 5000)

    function responseHandler(msg: any) {
      resolve(msg);
      clearTimeout(timer);
    }

    socket.emit(emit, out);
    socket.once(emit, responseHandler);
  })
}